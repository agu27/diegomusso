<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diego Musso - Login</title>

    <link rel="stylesheet" href="../../assets/css/countable-news.css">
    <link rel="stylesheet" href="../../assets/css/countable-news-desktop.css" media="screen and (min-width: 1000px)">
</head>
<body>
    <nav>
        <img src="../../assets/logos/dm-white.png" alt="logo" class="logo">

        <div class="navbar">

            <ul>
                <li class="about-us">
                    <a href="./">
                        <p>Home</p>
                        <div class="underline"></div>
                    </a>
                </li>
            </ul>

            <ul>
                <li class="about-us">
                    <a href="../news">
                        <p>Noticias</p>
                        <div class="underline"></div>
                    </a>
                </li>
            </ul>

            {{#if user}}
                <a href="../../logout" class="log-in">
                    <p>Salir</p>
                </a>
            {{else}}
                <a href="../../login" class="log-in">
                    <p>Log In</p>
                </a>
            {{/if}}
        </div>
    </nav>

    <div class="singleNew" id={{article.pos}}>
        <div class="wholeBody">
            <div class="body">
                <h2 class="newTitle">
                    {{article.title}}
                </h2>
                <p class="newBody" id="body{{article.pos}}">
                    {{article.body}}
                </p>
            </div>
            <div class="newDate">
                <p>
                    <span>{{article.date}}</span>
                </p>
                {{#if user.admin}}
                <a href="/news/delete/{{article.id}}">
                    <figure>
                        <img src="../../assets/icons/bin.png" alt="">
                    </figure>
                </a>
                {{/if}}
            </div>
        </div>
        <figure class="newImage">
            <img src="../{{article.path}}" alt="">
        </figure>
    </div>

    <div class="contact">
        <p>
            Contactate con el Ã¡rea
        </p>
        <div class="contact-icons">
            <a href="https://api.whatsapp.com/send?phone=0543472506163">
                <figure>
                    <img src="../../assets/icons/whatsapp.png" alt="github icon">
                </figure>
            </a>
            <a id="emailButton">
                <figure>
                    <img src="../../assets/icons/email.png" alt="mail icon">
                </figure>
            </a>
        </div>
    </div>

    <div class="send-mail" id="sendMail">
        <form method="POST" action="https://formsubmit.co/estudio@diegomusso.com.ar" class="data-upload">
            <figure class="close-window" id="closeEmailWindow">
                <img src="../../assets/icons/cancel.png" alt="" class="close-window">
            </figure>
            <div class="box">
                <label>Nombre</label>
                <input type="text" name="name" required="" id="emailName" style="font-family: inherit;" class="title-input">
            </div>

            <div class="box">
                <label>Email</label>
                <input type="email" name="email" required="" id="emailOwner" style="font-family: inherit;" class="title-input">
            </div>

            <div class="box">
                <label>Mensaje</label>
                {{!-- <input type="text" name="body" required="" id="newBody" style="font-family: inherit;" class="title-input"> --}}
                <textarea type="text" rows="1" cols="26" name="emailBody" class="email-input" style="font-family: inherit;"></textarea>
            </div>
            
            <div class="data-submit">
                <input type="hidden" name="crumb" value={{crumb}} />
                <button type="submit" class="data-submit-button" style="font-family: inherit;">Enviar</button>
            </div>
        </form>
    </div>

    <script>
        let newTwo = document.getElementById('new2');
        let bodyTwo = document.getElementById('bodynew2');
        let newTwoSize = 0;
        let newThree = document.getElementById('new3');
        let bodyThree = document.getElementById('bodynew3');
        let newThreeSize = 0;
        let newFour = document.getElementById('new4');
        let bodyFour = document.getElementById('bodynew4');
        let newFourSize = 0;
        let newFive = document.getElementById('new5');
        let bodyFive = document.getElementById('bodynew5');
        let newFiveSize = 0;

        newTwo.addEventListener("click", (e) => {
            console.log(e);

            if(newTwoSize == 0) {
                bodyTwo.style.maxHeight = '100%';
                bodyTwo.style.whiteSpace = 'wrap'
                newTwoSize = 1;
            }

            else {
                bodyTwo.style.maxHeight = '40px';
                bodyTwo.style.whiteSpace = 'nowrap'
                newTwoSize = 0;
            }
        })

        newThree.addEventListener("click", (e) => {
            console.log(e);

            if(newThreeSize == 0) {
                bodyThree.style.maxHeight = '100%';
                bodyThree.style.whiteSpace = 'wrap'
                newThreeSize = 1;
            }

            else {
                bodyThree.style.maxHeight = '40px';
                bodyThree.style.whiteSpace = 'nowrap'
                newThreeSize = 0;
            }
        })

        newFour.addEventListener("click", (e) => {
            console.log(e);

            if(newThreeSize == 0) {
                bodyFour.style.maxHeight = '100%';
                bodyFour.style.whiteSpace = 'wrap'
                newFourSize = 1;
            }

            else {
                bodyFour.style.maxHeight = '40px';
                bodyFour.style.whiteSpace = 'nowrap'
                newFourSize = 0;
            }
        })

        newFive.addEventListener("click", (e) => {
            console.log(e);

            if(newFiveSize == 0) {
                bodyFive.style.maxHeight = '100%';
                bodyFive.style.whiteSpace = 'wrap'
                newFiveSize = 1;
            }

            else {
                bodyFive.style.maxHeight = '40px';
                bodyFive.style.whiteSpace = 'nowrap'
                newFiveSize = 0;
            }
        })
    </script>

    <script type="text/javascript">
        let fileInput = document.getElementById('fileUpload');
        let fileNameInput = document.getElementById('fileName');

        fileInput.addEventListener('change', e => {
            console.log(e);
            let fileName = fileInput.files[0].name;


            fileNameInput.value = fileName;

            console.log(fileNameInput.value);

            if (fileInput.files && fileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    document.getElementById('fileVisualizer').innerHTML = `<p>${fileName}</p>`
                }
            reader.readAsDataURL(fileInput.files[0]);
            }   
        })
    </script>

    <script>
        function previewBeforeUpload (id) {

            let fileOne = document.getElementById(id)

            fileOne.addEventListener('change', e => {
                console.log(e)
                if  (e.target.files.length == 0) {
                    return;
                }

                let file = e.target.files[0];
                let url = URL.createObjectURL(file);
                document.querySelector("#"+id+"-preview div").innerText = file.name;
                document.querySelector("#"+id+"-preview img").src = url
            })
        }

        previewBeforeUpload("file-1");
    </script>

    <script>
        let addNew = document.getElementById('addNew');
        let closeWindow = document.getElementById('closeWindow');
        let addButton = document.getElementById('addButton');
        let displayNew = 0;

        closeWindow.addEventListener('click', e => {

                return addNew.style.display = 'none'

        });

        addButton.addEventListener('click', e => {

                return addNew.style.display = 'flex'

        });

    </script>

    <script>
        let sendEmail = document.getElementById('sendMail');
        let closeEmail = document.getElementById('closeEmailWindow');
        let emailBttn = document.getElementById('emailButton');

        closeEmail.addEventListener('click', e => {

                return sendEmail.style.display = 'none'

        });

        emailBttn.addEventListener('click', e => {

                return sendEmail.style.display = 'flex'

        });

    </script>

</body>
</html>